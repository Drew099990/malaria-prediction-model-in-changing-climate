"use strict";exports.id=778,exports.ids=[778],exports.modules={95778:(a,b,c)=>{c.d(b,{dp:()=>w.dp});var d=c(49471),e=c(24636),f=c(16390);function g(a,b){if("undefined"==typeof Convex||void 0===Convex.syscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");return JSON.parse(Convex.syscall(a,JSON.stringify(b)))}async function h(a,b){let c;if("undefined"==typeof Convex||void 0===Convex.asyncSyscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");try{c=await Convex.asyncSyscall(a,JSON.stringify(b))}catch(a){if(void 0!==a.data){let b=new e.i(a.message);throw b.data=(0,f.du)(a.data),b}throw Error(a.message)}return JSON.parse(c)}c(23991);var i=Object.defineProperty,j=(a,b,c)=>((a,b,c)=>b in a?i(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class k{constructor(){j(this,"_isExpression"),j(this,"_value")}}var l=Object.defineProperty;class m extends k{constructor(a){super(),((a,b,c)=>((a,b,c)=>b in a?l(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c))(this,"inner"),this.inner=a}serialize(){return this.inner}}function n(a){return a instanceof m?a.serialize():{$literal:(0,f.cy)(a)}}let o={eq:(a,b)=>new m({$eq:[n(a),n(b)]}),neq:(a,b)=>new m({$neq:[n(a),n(b)]}),lt:(a,b)=>new m({$lt:[n(a),n(b)]}),lte:(a,b)=>new m({$lte:[n(a),n(b)]}),gt:(a,b)=>new m({$gt:[n(a),n(b)]}),gte:(a,b)=>new m({$gte:[n(a),n(b)]}),add:(a,b)=>new m({$add:[n(a),n(b)]}),sub:(a,b)=>new m({$sub:[n(a),n(b)]}),mul:(a,b)=>new m({$mul:[n(a),n(b)]}),div:(a,b)=>new m({$div:[n(a),n(b)]}),mod:(a,b)=>new m({$mod:[n(a),n(b)]}),neg:a=>new m({$neg:n(a)}),and:(...a)=>new m({$and:a.map(n)}),or:(...a)=>new m({$or:a.map(n)}),not:a=>new m({$not:n(a)}),field:a=>new m({$field:a})};function p(a,b,c,d){if(void 0===a)throw TypeError(`Must provide arg ${b} \`${d}\` to \`${c}\``)}var q=c(5356),r=Object.defineProperty,s=(a,b,c)=>((a,b,c)=>b in a?r(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);function t(a){throw Error("consumed"===a?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}Symbol.asyncIterator;class u{constructor(a){s(this,"state"),s(this,"tableNameForErrorMessages"),this.state={type:"preparing",query:a},"FullTableScan"===a.source.type?this.tableNameForErrorMessages=a.source.tableName:this.tableNameForErrorMessages=a.source.indexName.split(".")[0]}takeQuery(){if("preparing"!==this.state.type)throw Error("A query can only be chained once and can't be chained after iteration begins.");let a=this.state.query;return this.state={type:"closed"},a}startQuery(){if("executing"===this.state.type)throw Error("Iteration can only begin on a query once.");("closed"===this.state.type||"consumed"===this.state.type)&&t(this.state.type);let{queryId:a}=g("1.0/queryStream",{query:this.state.query,version:q.r});return this.state={type:"executing",queryId:a},a}closeQuery(){"executing"===this.state.type&&g("1.0/queryCleanup",{queryId:this.state.queryId}),this.state={type:"consumed"}}order(a){p(a,1,"order","order");let b=this.takeQuery();if("Search"===b.source.type)throw Error("Search queries must always be in relevance order. Can not set order manually.");if(null!==b.source.order)throw Error("Queries may only specify order at most once");return b.source.order=a,new u(b)}filter(a){p(a,1,"filter","predicate");let b=this.takeQuery();if(b.operators.length>=256)throw Error("Can't construct query with more than 256 operators");return b.operators.push({filter:n(a(o))}),new u(b)}limit(a){p(a,1,"limit","n");let b=this.takeQuery();return b.operators.push({limit:a}),new u(b)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){("closed"===this.state.type||"consumed"===this.state.type)&&t(this.state.type);let a="preparing"===this.state.type?this.startQuery():this.state.queryId,{value:b,done:c}=await h("1.0/queryStreamNext",{queryId:a});return c&&this.closeQuery(),{value:(0,d.du)(b),done:c}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(a){if(p(a,1,"paginate","options"),"number"!=typeof a?.numItems||a.numItems<0)throw Error(`\`options.numItems\` must be a positive number. Received \`${a?.numItems}\`.`);let b=this.takeQuery(),c=a.numItems,e=a.cursor,f=a?.endCursor??null,g=a.maximumRowsRead??null,{page:i,isDone:j,continueCursor:k,splitCursor:l,pageStatus:m}=await h("1.0/queryPage",{query:b,cursor:e,endCursor:f,pageSize:c,maximumRowsRead:g,maximumBytesRead:a.maximumBytesRead,version:q.r});return{page:i.map(a=>(0,d.du)(a)),isDone:j,continueCursor:k,splitCursor:l,pageStatus:m}}async collect(){let a=[];for await(let b of this)a.push(b);return a}async take(a){p(a,1,"take","n");if(!Number.isInteger(a)||a<0)throw TypeError("Arg 1 `n` to `take` must be a non-negative integer");return this.limit(a).collect()}async first(){let a=await this.take(1);return 0===a.length?null:a[0]}async unique(){let a=await this.take(2);if(0===a.length)return null;if(2===a.length)throw Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:
 [${a[0]._id}, ${a[1]._id}, ...]`);return a[0]}}var v=c(77954);v.v.object({numItems:v.v.number(),cursor:v.v.union(v.v.string(),v.v.null()),endCursor:v.v.optional(v.v.union(v.v.string(),v.v.null())),id:v.v.optional(v.v.number()),maximumRowsRead:v.v.optional(v.v.number()),maximumBytesRead:v.v.optional(v.v.number())});var w=c(61966),x=Object.defineProperty,y=Object.defineProperty,z=(a,b,c)=>((a,b,c)=>b in a?y(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class A{constructor(a){z(this,"indexes"),z(this,"searchIndexes"),z(this,"vectorIndexes"),z(this,"validator"),this.indexes=[],this.searchIndexes=[],this.vectorIndexes=[],this.validator=a}" indexes"(){return this.indexes}index(a,b){return this.indexes.push({indexDescriptor:a,fields:b}),this}searchIndex(a,b){return this.searchIndexes.push({indexDescriptor:a,searchField:b.searchField,filterFields:b.filterFields||[]}),this}vectorIndex(a,b){return this.vectorIndexes.push({indexDescriptor:a,vectorField:b.vectorField,dimensions:b.dimensions,filterFields:b.filterFields||[]}),this}self(){return this}export(){let a=this.validator.json;if("object"!=typeof a)throw Error("Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)");return{indexes:this.indexes,searchIndexes:this.searchIndexes,vectorIndexes:this.vectorIndexes,documentType:a}}}function B(a){return new A((0,v.d)(a)?a:v.v.object(a))}class C{constructor(a,b){z(this,"tables"),z(this,"strictTableNameTypes"),z(this,"schemaValidation"),this.tables=a,this.schemaValidation=b?.schemaValidation===void 0||b.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([a,b])=>{let{indexes:c,searchIndexes:d,vectorIndexes:e,documentType:f}=b.export();return{tableName:a,indexes:c,searchIndexes:d,vectorIndexes:e,documentType:f}}),schemaValidation:this.schemaValidation})}}new C({_scheduled_functions:B({name:v.v.string(),args:v.v.array(v.v.any()),scheduledTime:v.v.float64(),completedTime:v.v.optional(v.v.float64()),state:v.v.union(v.v.object({kind:v.v.literal("pending")}),v.v.object({kind:v.v.literal("inProgress")}),v.v.object({kind:v.v.literal("success")}),v.v.object({kind:v.v.literal("failed"),error:v.v.string()}),v.v.object({kind:v.v.literal("canceled")}))}),_storage:B({sha256:v.v.string(),size:v.v.float64(),contentType:v.v.optional(v.v.string())})},void 0)}};