"use strict";exports.id=823,exports.ids=[823],exports.modules={30823:(a,b,c)=>{c.r(b),c.d(b,{createOrReadKeyless:()=>aa,removeKeyless:()=>ab,safeParseClerkFile:()=>Y});var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=c(76731);c(79934),c(19215),c(58743);var A=c(32749),B=c(62828),C=c(56270),D=class{constructor(){(0,C.VK)(this,g),(0,C.VK)(this,e,"clerk_telemetry_throttler"),(0,C.VK)(this,f,864e5)}isEventThrottled(a){if(!(0,C.S7)(this,g,j))return!1;let b=Date.now(),c=(0,C.jq)(this,g,h).call(this,a),d=(0,C.S7)(this,g,i)?.[c];if(!d){let a={...(0,C.S7)(this,g,i),[c]:b};localStorage.setItem((0,C.S7)(this,e),JSON.stringify(a))}if(d&&b-d>(0,C.S7)(this,f)){let a=(0,C.S7)(this,g,i);delete a[c],localStorage.setItem((0,C.S7)(this,e),JSON.stringify(a))}return!!d}};e=new WeakMap,f=new WeakMap,g=new WeakSet,h=function(a){let{sk:b,pk:c,payload:d,...e}=a,f={...d,...e};return JSON.stringify(Object.keys({...d,...e}).sort().map(a=>f[a]))},i=function(){let a=localStorage.getItem((0,C.S7)(this,e));return a?JSON.parse(a):{}},j=function(){if("undefined"==typeof window)return!1;let a=window.localStorage;if(!a)return!1;try{let b="test";return a.setItem(b,b),a.removeItem(b),!0}catch(b){return b instanceof DOMException&&("QuotaExceededError"===b.name||"NS_ERROR_DOM_QUOTA_REACHED"===b.name)&&a.length>0&&a.removeItem((0,C.S7)(this,e)),!1}};var E=new Set(["error","warn","info","debug","trace"]),F={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},G=class{constructor(a){(0,C.VK)(this,p),(0,C.VK)(this,k),(0,C.VK)(this,l),(0,C.VK)(this,m,{}),(0,C.VK)(this,n,[]),(0,C.VK)(this,o,null),(0,C.OV)(this,k,{maxBufferSize:a.maxBufferSize??F.maxBufferSize,samplingRate:a.samplingRate??F.samplingRate,perEventSampling:a.perEventSampling??!0,disabled:a.disabled??!1,debug:a.debug??!1,endpoint:F.endpoint}),a.clerkVersion||"undefined"!=typeof window?(0,C.S7)(this,m).clerkVersion=a.clerkVersion??"":(0,C.S7)(this,m).clerkVersion="",(0,C.S7)(this,m).sdk=a.sdk,(0,C.S7)(this,m).sdkVersion=a.sdkVersion,(0,C.S7)(this,m).publishableKey=a.publishableKey??"";let b=(0,B.q5)(a.publishableKey);b&&((0,C.S7)(this,m).instanceType=b.instanceType),a.secretKey&&((0,C.S7)(this,m).secretKey=a.secretKey.substring(0,16)),(0,C.OV)(this,l,new D)}get isEnabled(){return!("development"!==(0,C.S7)(this,m).instanceType||(0,C.S7)(this,k).disabled||"undefined"!=typeof process&&process.env&&(0,A.zz)(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return(0,C.S7)(this,k).debug||"undefined"!=typeof process&&process.env&&(0,A.zz)(process.env.CLERK_TELEMETRY_DEBUG)}record(a){let b=(0,C.jq)(this,p,x).call(this,a.event,a.payload);(0,C.jq)(this,p,v).call(this,b.event,b),(0,C.jq)(this,p,q).call(this,b,a.eventSamplingRate)&&((0,C.S7)(this,n).push({kind:"event",value:b}),(0,C.jq)(this,p,t).call(this))}recordLog(a){if(!(0,C.jq)(this,p,r).call(this,a))return;let b="string"==typeof a?.level&&E.has(a.level),c="string"==typeof a?.message&&a.message.trim().length>0,d=null,e=a?.timestamp;if("number"==typeof e||"string"==typeof e){let a=new Date(e);Number.isNaN(a.getTime())||(d=a)}if(!b||!c||null===d){this.isDebug&&"undefined"!=typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:b,messageIsValid:c,timestampIsValid:null!==d});return}let f=(0,C.jq)(this,p,w).call(this),g={sdk:f.name,sdkv:f.version,cv:(0,C.S7)(this,m).clerkVersion??"",lvl:a.level,msg:a.message,ts:d.toISOString(),pk:(0,C.S7)(this,m).publishableKey||null,payload:(0,C.jq)(this,p,y).call(this,a.context)};(0,C.S7)(this,n).push({kind:"log",value:g}),(0,C.jq)(this,p,t).call(this)}};k=new WeakMap,l=new WeakMap,m=new WeakMap,n=new WeakMap,o=new WeakMap,p=new WeakSet,q=function(a,b){return this.isEnabled&&!this.isDebug&&(0,C.jq)(this,p,s).call(this,a,b)},r=function(a){return!0},s=function(a,b){let c=Math.random();return!!(c<=(0,C.S7)(this,k).samplingRate&&(!1===(0,C.S7)(this,k).perEventSampling||void 0===b||c<=b))&&!(0,C.S7)(this,l).isEventThrottled(a)},t=function(){if("undefined"==typeof window)return void(0,C.jq)(this,p,u).call(this);if((0,C.S7)(this,n).length>=(0,C.S7)(this,k).maxBufferSize){(0,C.S7)(this,o)&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback(Number((0,C.S7)(this,o))):clearTimeout(Number((0,C.S7)(this,o)))),(0,C.jq)(this,p,u).call(this);return}(0,C.S7)(this,o)||("requestIdleCallback"in window?(0,C.OV)(this,o,requestIdleCallback(()=>{(0,C.jq)(this,p,u).call(this),(0,C.OV)(this,o,null)})):(0,C.OV)(this,o,setTimeout(()=>{(0,C.jq)(this,p,u).call(this),(0,C.OV)(this,o,null)},0)))},u=function(){let a=[...(0,C.S7)(this,n)];if((0,C.OV)(this,n,[]),(0,C.OV)(this,o,null),0===a.length)return;let b=a.filter(a=>"event"===a.kind).map(a=>a.value),c=a.filter(a=>"log"===a.kind).map(a=>a.value);b.length>0&&fetch(new URL("/v1/event",(0,C.S7)(this,k).endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:b})}).catch(()=>void 0),c.length>0&&fetch(new URL("/v1/logs",(0,C.S7)(this,k).endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:c})}).catch(()=>void 0)},v=function(a,b){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",a),console.log(b),console.groupEnd()):console.log("[clerk/telemetry]",a,b))},w=function(){let a={name:(0,C.S7)(this,m).sdk,version:(0,C.S7)(this,m).sdkVersion};if("undefined"!=typeof window){let b=window;if(b.Clerk){let c=b.Clerk;if("object"==typeof c&&null!==c&&"constructor"in c&&"function"==typeof c.constructor&&c.constructor.sdkMetadata){let{name:b,version:d}=c.constructor.sdkMetadata;void 0!==b&&(a.name=b),void 0!==d&&(a.version=d)}}}return a},x=function(a,b){let c=(0,C.jq)(this,p,w).call(this);return{event:a,cv:(0,C.S7)(this,m).clerkVersion??"",it:(0,C.S7)(this,m).instanceType??"",sdk:c.name,sdkv:c.version,...(0,C.S7)(this,m).publishableKey?{pk:(0,C.S7)(this,m).publishableKey}:{},...(0,C.S7)(this,m).secretKey?{sk:(0,C.S7)(this,m).secretKey}:{},payload:b}},y=function(a){if(null==a||"object"!=typeof a)return null;try{let b=JSON.parse(JSON.stringify(a));if(b&&"object"==typeof b&&!Array.isArray(b))return b;return null}catch{return null}},d=z.nr,async(...a)=>{let{data:b,errors:c}=await d(...a);if(c)throw c[0];return b};var H=c(51241);let I={secretKey:H.rB,publishableKey:H.At,apiUrl:H.H$,apiVersion:H.mG,userAgent:"@clerk/nextjs@6.31.1",proxyUrl:H.Rg,domain:H.V2,isSatellite:H.fS,machineSecretKey:H.Fx,sdkMetadata:H.tm,telemetry:{disabled:H.nN,debug:H.Mh}};var J=Object.getOwnPropertyNames;let K=((a,b)=>function(){return b||(0,a[J(a)[0]])((b={exports:{}}).exports,b),b.exports})({"src/runtime/node/safe-node-apis.js"(a,b){let{existsSync:d,writeFileSync:e,readFileSync:f,appendFileSync:g,mkdirSync:h,rmSync:i}=c(73024);b.exports={fs:{existsSync:d,writeFileSync:e,readFileSync:f,appendFileSync:g,mkdirSync:h,rmSync:i},path:c(76760),cwd:()=>process.cwd()}}})(),L=a=>{throw Error(`Clerk: ${a} is missing. This is an internal error. Please contact Clerk's support.`)},M=()=>(K.fs||L("fs"),K.fs),N=()=>(K.path||L("path"),K.path),O=()=>(K.cwd||L("cwd"),K.cwd);var P=c(74208);async function Q(){var a;let b=await (0,P.b3)();return{nodeVersion:process.version,nextVersion:function(){var a;try{return null!=(a=process.title)?a:"unknown-process-title"}catch{return}}(),npmConfigUserAgent:process.env.npm_config_user_agent,userAgent:null!=(a=b.get("User-Agent"))?a:void 0}}function R(a){let b=new Headers;return a.nodeVersion&&b.set("Clerk-Node-Version",a.nodeVersion),a.nextVersion&&b.set("Clerk-Next-Version",a.nextVersion),a.npmConfigUserAgent&&b.set("Clerk-NPM-Config-User-Agent",a.npmConfigUserAgent),a.userAgent&&b.set("Clerk-Client-User-Agent",a.userAgent),b}let S=".clerk",T="clerk.lock",U=(...a)=>{let b=N(),c=O();return b.join(c(),S,...a)},V=".tmp",W=()=>U(V,"keyless.json"),X=!1;function Y(){let{readFileSync:a}=M();try{let b,c=W();try{b=a(c,{encoding:"utf-8"})||"{}"}catch{b="{}"}return JSON.parse(b)}catch{return}}let Z=()=>{let{writeFileSync:a}=M();X=!0,a(T,"This file can be deleted. Please delete this file and refresh your application",{encoding:"utf8",mode:"0777",flag:"w"})},$=()=>{let{rmSync:a}=M();try{a(T,{force:!0,recursive:!0})}catch{}X=!1},_=()=>{let{existsSync:a}=M();return X||a(T)};async function aa(){let a,{writeFileSync:b,mkdirSync:c}=M();if(_())return null;Z();let d=W(),e=U(V,"README.md");c(U(V),{recursive:!0}),function(){let{existsSync:a,writeFileSync:b,readFileSync:c,appendFileSync:d}=M(),e=N(),f=O(),g=e.join(f(),".gitignore");a(g)||b(g,""),c(g,"utf-8").includes(S+"/")||d(g,`
# clerk configuration (can include secrets)
/${S}/
`)}();let f=Y();if((null==f?void 0:f.publishableKey)&&(null==f?void 0:f.secretKey))return $(),f;let g=(a={},function(a){let b={...a},c=(0,z.y3)(b),d=(0,z.Bs)({options:b,apiClient:c}),e=new G({...a.telemetry,publishableKey:b.publishableKey,secretKey:b.secretKey,samplingRate:.1,...b.sdkMetadata?{sdk:b.sdkMetadata.name,sdkVersion:b.sdkMetadata.version}:{}});return{...c,...d,telemetry:e}}({...I,...a})),h=await Q().then(R).catch(()=>new Headers),i=await g.__experimental_accountlessApplications.createAccountlessApplication({requestHeaders:h}).catch(()=>null);return i&&(b(d,JSON.stringify(i),{encoding:"utf8",mode:"0777",flag:"w"}),b(e,`
## DO NOT COMMIT
This directory is auto-generated from \`@clerk/nextjs\` because you are running in Keyless mode. Avoid committing the \`.clerk/\` directory as it includes the secret key of the unclaimed instance.
  `,{encoding:"utf8",mode:"0777",flag:"w"})),$(),i}function ab(){let{rmSync:a}=M();if(!_()){Z();try{a(U(),{force:!0,recursive:!0})}catch{}$()}}}};