{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/goals%20for%20the%20holiday/malaria-shpher/app/api/predict/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    let body: any = null;\r\n    try {\r\n      body = await request.json();\r\n    } catch (e) {\r\n      console.error('Invalid JSON in request body:', e);\r\n      return NextResponse.json({ error: 'Invalid JSON in request body' }, { status: 400 });\r\n    }\r\n\r\n    // Forward request to FastAPI backend\r\n    let backendResponse: Response;\r\n    try {\r\n      backendResponse = await fetch('http://localhost:8000/api/predict-malaria', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(body),\r\n      });\r\n    } catch (e) {\r\n      console.error('Error contacting backend:', e);\r\n      return NextResponse.json({ error: 'Unable to contact prediction backend', detail: String(e) }, { status: 502 });\r\n    }\r\n\r\n    const text = await backendResponse.text();\r\n    let data: any = null;\r\n    try {\r\n      data = text ? JSON.parse(text) : null;\r\n    } catch (e) {\r\n      console.error('Failed parsing backend JSON:', e, 'backend text:', text);\r\n      return NextResponse.json({ error: 'Invalid response from backend', backendStatus: backendResponse.status, backendBody: text }, { status: 502 });\r\n    }\r\n\r\n    if (!backendResponse.ok) {\r\n      console.error('Backend returned error:', backendResponse.status, data || text);\r\n      return NextResponse.json({ error: 'Backend error', status: backendResponse.status, body: data || text }, { status: backendResponse.status });\r\n    }\r\n\r\n    return NextResponse.json(data, { status: 200 });\r\n  } catch (error) {\r\n    console.error('Prediction error:', error);\r\n    return NextResponse.json({ error: 'Failed to get prediction from AI model', detail: String(error) }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,IAAI,OAAY;QAChB,IAAI;YACF,OAAO,MAAM,QAAQ,IAAI;QAC3B,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA+B,GAAG;gBAAE,QAAQ;YAAI;QACpF;QAEA,qCAAqC;QACrC,IAAI;QACJ,IAAI;YACF,kBAAkB,MAAM,MAAM,6CAA6C;gBACzE,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAAwC,QAAQ,OAAO;YAAG,GAAG;gBAAE,QAAQ;YAAI;QAC/G;QAEA,MAAM,OAAO,MAAM,gBAAgB,IAAI;QACvC,IAAI,OAAY;QAChB,IAAI;YACF,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ;QACnC,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,gCAAgC,GAAG,iBAAiB;YAClE,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAAiC,eAAe,gBAAgB,MAAM;gBAAE,aAAa;YAAK,GAAG;gBAAE,QAAQ;YAAI;QAC/I;QAEA,IAAI,CAAC,gBAAgB,EAAE,EAAE;YACvB,QAAQ,KAAK,CAAC,2BAA2B,gBAAgB,MAAM,EAAE,QAAQ;YACzE,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAAiB,QAAQ,gBAAgB,MAAM;gBAAE,MAAM,QAAQ;YAAK,GAAG;gBAAE,QAAQ,gBAAgB,MAAM;YAAC;QAC5I;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAA0C,QAAQ,OAAO;QAAO,GAAG;YAAE,QAAQ;QAAI;IACrH;AACF","debugId":null}}]
}