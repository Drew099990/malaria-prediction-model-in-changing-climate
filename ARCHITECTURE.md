# Malaria Prediction System - Architecture & Data Flow

## Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MALARIA PREDICTION SYSTEM                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE LAYER                         â”‚
â”‚                    http://localhost:3000                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚         FORECAST PAGE (page.tsx)                        â”‚        â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚        â”‚
â”‚   â”‚                                                          â”‚        â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â”‚
â”‚   â”‚  â”‚  INPUT FORM      â”‚  â”‚  RESULTS PANEL           â”‚   â”‚        â”‚
â”‚   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚   â”‚        â”‚
â”‚   â”‚  â”‚ â€¢ Temperature   â”‚  â”‚  Probability: 47%        â”‚   â”‚        â”‚
â”‚   â”‚  â”‚ â€¢ Rainfall      â”‚  â”‚  Risk: MODERATE          â”‚   â”‚        â”‚
â”‚   â”‚  â”‚ â€¢ Humidity      â”‚  â”‚  Recommendation: ...     â”‚   â”‚        â”‚
â”‚   â”‚  â”‚ â€¢ Breeding Countâ”‚  â”‚  Confidence: Moderate    â”‚   â”‚        â”‚
â”‚   â”‚  â”‚ â€¢ Prev Cases    â”‚  â”‚                           â”‚   â”‚        â”‚
â”‚   â”‚  â”‚ â€¢ Irrigation    â”‚  â”‚  [Color-coded Display]   â”‚   â”‚        â”‚
â”‚   â”‚  â”‚ â€¢ Season        â”‚  â”‚  ðŸŸ¢ Low    (0-20%)       â”‚   â”‚        â”‚
â”‚   â”‚  â”‚                 â”‚  â”‚  ðŸŸ¡ Moderate (21-50%)    â”‚   â”‚        â”‚
â”‚   â”‚  â”‚ [Compute] [Reset] â”‚  â”‚  ðŸŸ  High   (51-80%)     â”‚   â”‚        â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  ðŸ”´ Very High (81-100%) â”‚   â”‚        â”‚
â”‚   â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”‚
â”‚   â”‚                                                          â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                       â”‚
â”‚                    React State Management:                           â”‚
â”‚     â”œâ”€ temperature, rainfall, humidity, etc. (useState)             â”‚
â”‚     â”œâ”€ isLoading, prediction, error                                 â”‚
â”‚     â””â”€ submit() & reset() functions                                 â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ POST /api/predict
                                  â”‚ JSON: {temperature, rainfall, ...}
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NEXT.JS API PROXY LAYER                         â”‚
â”‚                    app/api/predict/route.ts                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  API Route Handler                                          â”‚   â”‚
â”‚  â”‚  â€¢ Receives form JSON from frontend                         â”‚   â”‚
â”‚  â”‚  â€¢ Validates request                                        â”‚   â”‚
â”‚  â”‚  â€¢ Forwards to FastAPI backend                             â”‚   â”‚
â”‚  â”‚  â€¢ Handles CORS & errors                                   â”‚   â”‚
â”‚  â”‚  â€¢ Returns prediction JSON to frontend                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ POST http://localhost:8000/api/predict-malaria
                                  â”‚ JSON: {temperature, rainfall, ...}
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FASTAPI BACKEND SERVICE LAYER                     â”‚
â”‚               http://localhost:8000 (app/backend.py)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FastAPI Application                                        â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  CORS Middleware                                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Allows requests from http://localhost:3000         â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                          â–¼                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  MalariaInput Schema (Pydantic)                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ temperature: float | None                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ rainfall: float | None                            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ humidity: float | None                            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ breedingCount: int | None                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ previousCases: int | None                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ irrigation: bool                                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ season: str                                       â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                          â–¼                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  POST /api/predict-malaria Endpoint                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Validates input                                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Applies defaults for None values                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Calls predict_malaria_risk()                      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Returns JSON response                             â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ Call predict_malaria_risk()
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MODEL INFERENCE LAYER                          â”‚
â”‚                    malaria_model.py                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. PREPROCESSING (preprocess_input)                        â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Input: Raw climate values                                  â”‚   â”‚
â”‚  â”‚    temperature (15-35Â°C) â†’ norm: (T-15)/20                 â”‚   â”‚
â”‚  â”‚    rainfall (0-500mm) â†’ norm: min(R/500, 1.0)              â”‚   â”‚
â”‚  â”‚    humidity (30-90%) â†’ norm: (H-30)/60                     â”‚   â”‚
â”‚  â”‚    breedingCount (0-20) â†’ norm: min(B/20, 1.0)             â”‚   â”‚
â”‚  â”‚    previousCases (0-100) â†’ norm: min(C/100, 1.0)           â”‚   â”‚
â”‚  â”‚    irrigation (0/1) â†’ norm: 0/1                            â”‚   â”‚
â”‚  â”‚    season â†’ norm: 1.0 (rainy) / 0.5 (transition) / 0 (dry) â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Output: 7-element tensor [normalized values]               â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. NEURAL NETWORK (PyTorch)                               â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚                  INPUT (7)                                 â”‚   â”‚
â”‚  â”‚                    â”‚                                        â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚   â”‚
â”‚  â”‚    â”‚  FC1: 7 â†’ 64                â”‚                         â”‚   â”‚
â”‚  â”‚    â”‚  ReLU Activation            â”‚                         â”‚   â”‚
â”‚  â”‚    â”‚  Dropout(0.3)               â”‚                         â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚   â”‚
â”‚  â”‚               â”‚                                              â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚  â”‚    â”‚  FC2: 64 â†’ 64             â”‚                            â”‚   â”‚
â”‚  â”‚    â”‚  ReLU Activation           â”‚                            â”‚   â”‚
â”‚  â”‚    â”‚  Dropout(0.3)              â”‚                            â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚  â”‚               â”‚                                              â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚  â”‚    â”‚  FC3: 64 â†’ 32             â”‚                            â”‚   â”‚
â”‚  â”‚    â”‚  ReLU Activation           â”‚                            â”‚   â”‚
â”‚  â”‚    â”‚  Dropout(0.2)              â”‚                            â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚  â”‚               â”‚                                              â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚  â”‚    â”‚  FC4: 32 â†’ 1              â”‚                            â”‚   â”‚
â”‚  â”‚    â”‚  Sigmoid Activation        â”‚                            â”‚   â”‚
â”‚  â”‚    â”‚  Output: 0-1 probability   â”‚                            â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚  â”‚               â”‚                                              â”‚   â”‚
â”‚  â”‚              OUTPUT (1) = probability                        â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. POST-PROCESSING (predict_malaria_risk)                 â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Input: model output (0-1)                                  â”‚   â”‚
â”‚  â”‚  Multiply by 100: probability (0-100%)                      â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Determine risk level:                                      â”‚   â”‚
â”‚  â”‚    0-20%   â†’ "Low"                                          â”‚   â”‚
â”‚  â”‚    21-50%  â†’ "Moderate"                                     â”‚   â”‚
â”‚  â”‚    51-80%  â†’ "High"                                         â”‚   â”‚
â”‚  â”‚    81-100% â†’ "Very High"                                    â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Generate recommendation based on risk                      â”‚   â”‚
â”‚  â”‚  Set confidence based on probability extremity              â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Output: {probability, risk_level, recommendation, confidence} â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ JSON Response
                                  â”‚ {
                                  â”‚   "probability": 47.01,
                                  â”‚   "risk_level": "Moderate",
                                  â”‚   "recommendation": "...",
                                  â”‚   "model_confidence": "Moderate"
                                  â”‚ }
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RESPONSE HANDLING & DISPLAY                       â”‚
â”‚                     Frontend (page.tsx)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Parse JSON Response                                        â”‚   â”‚
â”‚  â”‚  Set prediction state                                       â”‚   â”‚
â”‚  â”‚  Stop loading spinner                                       â”‚   â”‚
â”‚  â”‚  Update UI with results                                     â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Display:                                                   â”‚   â”‚
â”‚  â”‚  âœ“ Large probability percentage (color varies by risk)      â”‚   â”‚
â”‚  â”‚  âœ“ Risk level badge (Green/Yellow/Orange/Red)              â”‚   â”‚
â”‚  â”‚  âœ“ Public health recommendation text                        â”‚   â”‚
â”‚  â”‚  âœ“ Model confidence indicator                              â”‚   â”‚
â”‚  â”‚  âœ“ Interpretation guide below                              â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request/Response Format

### Frontend â†’ Next.js Route
```
POST /api/predict
Content-Type: application/json

{
  "temperature": 28,
  "rainfall": 250,
  "humidity": 75,
  "breedingCount": 5,
  "previousCases": 10,
  "irrigation": true,
  "season": "rainy"
}
```

### Next.js Route â†’ FastAPI Backend
```
POST http://localhost:8000/api/predict-malaria
Content-Type: application/json

{
  "temperature": 28,
  "rainfall": 250,
  "humidity": 75,
  "breedingCount": 5,
  "previousCases": 10,
  "irrigation": true,
  "season": "rainy"
}
```

### FastAPI Backend â†’ Frontend
```json
{
  "probability": 47.01,
  "risk_level": "Moderate",
  "recommendation": "Increase surveillance and implement vector control measures.",
  "model_confidence": "Moderate"
}
```

---

## Data Flow Sequence Diagram

```
User              Frontend           Next.js API      FastAPI         PyTorch
  â”‚                  â”‚                   â”‚               â”‚               â”‚
  â”‚â”€ Click Compute â”€â”€>â”‚                   â”‚               â”‚               â”‚
  â”‚                   â”‚â”€â”€â”€â”€ POST /api/predict â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
  â”‚                   â”‚                   â”‚               â”‚               â”‚
  â”‚                   â”‚                   â”‚â”€â”€â”€â”€ POST /api/predict-malaria ->â”‚
  â”‚                   â”‚                   â”‚               â”‚               â”‚
  â”‚                   â”‚                   â”‚               â”‚â”€ Preprocess â”€>â”‚
  â”‚                   â”‚                   â”‚               â”‚               â”‚
  â”‚                   â”‚                   â”‚               â”‚<â”€ Forward passâ”‚
  â”‚                   â”‚                   â”‚               â”‚               â”‚
  â”‚                   â”‚                   â”‚<â”€ Result â”€â”€â”€â”€â”€â”‚<â”€ Prediction  â”‚
  â”‚                   â”‚<â”€â”€â”€â”€â”€â”€ JSON â”€â”€â”€â”€â”€â”‚               â”‚               â”‚
  â”‚                   â”‚                   â”‚               â”‚               â”‚
  â”‚<â”€ Display Result â”€|                   â”‚               â”‚               â”‚
  â”‚                   â”‚                   â”‚               â”‚               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Model Architecture Visualization

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Input Vector â”‚ (7 features)
                        â”‚ [T,R,H,B,C,I,S]
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Fully Connected 1  â”‚
                    â”‚   7 neurons â†’ 64    â”‚
                    â”‚    ReLU + Dropout   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Fully Connected 2  â”‚
                    â”‚   64 neurons â†’ 64   â”‚
                    â”‚    ReLU + Dropout   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Fully Connected 3  â”‚
                    â”‚   64 neurons â†’ 32   â”‚
                    â”‚    ReLU + Dropout   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Fully Connected 4  â”‚
                    â”‚    32 neurons â†’ 1   â”‚
                    â”‚    Sigmoid Output   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Probability  â”‚ (0-1)
                        â”‚  Ã— 100 = %   â”‚ (0-100%)
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   malaria_model.py      â”‚  (PyTorch Model Definition)
â”‚  â€¢ MalariaPredictor     â”‚
â”‚  â€¢ preprocess_input()   â”‚
â”‚  â€¢ predict_malaria_risk()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Imported by
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   app/backend.py        â”‚  (FastAPI Server)
â”‚  â€¢ Creates model        â”‚
â”‚  â€¢ POST /api/predict    â”‚
â”‚  â€¢ Handles requests     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Called by
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  app/api/predict/       â”‚  (Next.js API Route)
â”‚  route.ts               â”‚
â”‚  â€¢ Proxy endpoint       â”‚
â”‚  â€¢ Forwards requests    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Called by
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  app/(nav)/forcast/     â”‚  (React Frontend)
â”‚  page.tsx               â”‚
â”‚  â€¢ Form UI              â”‚
â”‚  â€¢ State management     â”‚
â”‚  â€¢ Results display      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Lifecycle

```
1. APP STARTUP
   â”œâ”€ Next.js dev server starts
   â”œâ”€ FastAPI server starts
   â”œâ”€ PyTorch loads model.pth
   â””â”€ Ready for requests

2. USER SUBMITS FORM
   â”œâ”€ Collect form values
   â”œâ”€ Set loading state
   â”œâ”€ Send JSON to /api/predict
   â””â”€ Disable buttons

3. REQUEST PROCESSING
   â”œâ”€ Next.js receives request
   â”œâ”€ Forwards to FastAPI
   â”œâ”€ FastAPI validates input
   â”œâ”€ Model inference runs
   â””â”€ Results returned

4. RESPONSE HANDLING
   â”œâ”€ Frontend receives JSON
   â”œâ”€ Parse prediction data
   â”œâ”€ Clear loading state
   â”œâ”€ Update UI with results
   â””â”€ Enable buttons

5. USER VIEWS RESULTS
   â”œâ”€ Large probability display
   â”œâ”€ Color-coded risk level
   â”œâ”€ Health recommendation
   â””â”€ Confidence indicator

6. USER RESETS OR SUBMITS AGAIN
   â”œâ”€ Reset clears all state
   â”œâ”€ Back to step 2 (or done)
   â””â”€ User can try new scenario
```

---

## Error Handling Flow

```
Error occurs at any layer:

âŒ Network Error (Frontend â†’ API)
   â””â”€ Catch in fetch()
      â””â”€ Display: "Failed to get prediction"

âŒ API Error (Next.js Route)
   â””â”€ Status code not 200
      â””â”€ Return 500 response
         â””â”€ Display: "Failed to get prediction"

âŒ Backend Error (FastAPI)
   â””â”€ Invalid input
      â””â”€ HTTPException(status_code=500)
         â””â”€ Display: error detail

âŒ Model Error (PyTorch)
   â””â”€ Caught by try/except
      â””â”€ Returns error message
         â””â”€ Propagates to frontend
            â””â”€ User sees error message
```

---

## Performance Timeline

```
User Action: Click "Compute Probability"
â”‚
â”œâ”€ [~1ms] Collect form state
â”œâ”€ [~2ms] Serialize to JSON
â”œâ”€ [~10ms] Network request to Next.js API
â”œâ”€ [~5ms] Next.js process request
â”œâ”€ [~20ms] Network request to FastAPI
â”œâ”€ [~5ms] FastAPI validate input
â”œâ”€ [~2ms] Preprocess features
â”œâ”€ [~20ms] PyTorch model inference
â”œâ”€ [~1ms] Post-process results
â”œâ”€ [~20ms] Network response to Next.js
â”œâ”€ [~5ms] Next.js forward response
â”œâ”€ [~10ms] Network response to frontend
â”œâ”€ [~5ms] Parse JSON
â””â”€ [~1ms] Update React state & render
   â”‚
   â””â”€â–º Total: ~107ms (0.1 seconds)
       User perceives this as instant!
```

---

This architecture ensures scalability, maintainability, and separation of concerns across the full stack!
